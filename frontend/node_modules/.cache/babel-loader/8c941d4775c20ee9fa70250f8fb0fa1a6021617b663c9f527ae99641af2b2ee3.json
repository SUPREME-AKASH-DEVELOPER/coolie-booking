{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import io from\"socket.io-client\";import axios from\"axios\";import\"./App.css\";// Make sure to create and link this CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(\"https://coolie-booking-service.onrender.com\");const App=()=>{const[bookings,setBookings]=useState([]);const[form,setForm]=useState({passengerName:\"\",trainNumber:\"\",coachNumber:\"\",station:\"\",minutesBeforeArrival:\"\",cooliesNeeded:\"\"});useEffect(()=>{axios.get(\"https://coolie-booking-service.onrender.com/api/bookings\").then(res=>setBookings(res.data));socket.on(\"updateBookings\",newBooking=>{setBookings(prev=>[...prev,newBooking]);});return()=>socket.off(\"updateBookings\");},[]);const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();const res=await axios.post(\"https://coolie-booking-service.onrender.com/api/bookings\",form);socket.emit(\"newBooking\",res.data);setForm({passengerName:\"\",trainNumber:\"\",coachNumber:\"\",station:\"\",minutesBeforeArrival:\"\",cooliesNeeded:\"\"});};const handleClearBookings=async()=>{const username=prompt(\"Enter Username:\");const password=prompt(\"Enter Password:\");if(username===\"admin\"&&password===\"admin2025\"){try{await axios.delete(\"https://coolie-booking-service.onrender.com/api/bookings/clear\",{auth:{username,password}});alert(\"All active bookings cleared!\");setBookings([]);}catch(error){alert(\"Failed to clear bookings. Please try again.\");}}else{alert(\"Invalid credentials!\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDE86 Coolie Booking Service\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"passengerName\",placeholder:\"Passenger Name\",value:form.passengerName,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"trainNumber\",placeholder:\"Train Number\",value:form.trainNumber,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"coachNumber\",placeholder:\"Coach Number\",value:form.coachNumber,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"station\",placeholder:\"Station Name\",value:form.station,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"minutesBeforeArrival\",placeholder:\"Minutes Before Arrival\",value:form.minutesBeforeArrival,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"cooliesNeeded\",placeholder:\"Coolies Needed\",value:form.cooliesNeeded,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Book Coolie \\uD83D\\uDE80\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"active-bookings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCB Active Bookings:\"}),/*#__PURE__*/_jsx(\"div\",{children:bookings.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No active bookings\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Train No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Coach No.\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:bookings.map((b,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:b.passengerName}),/*#__PURE__*/_jsx(\"td\",{children:b.trainNumber}),/*#__PURE__*/_jsx(\"td\",{children:b.coachNumber})]},index))})]})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClearBookings,className:\"clear-button\",children:\"Clear All Active Bookings \\u274C\"})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","io","axios","jsx","_jsx","jsxs","_jsxs","socket","App","bookings","setBookings","form","setForm","passengerName","trainNumber","coachNumber","station","minutesBeforeArrival","cooliesNeeded","get","then","res","data","on","newBooking","prev","off","handleChange","e","target","name","value","handleSubmit","preventDefault","post","emit","handleClearBookings","username","prompt","password","delete","auth","alert","error","className","children","onSubmit","type","placeholder","onChange","required","length","map","b","index","onClick"],"sources":["A:/A/Project/coolie-booking/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport axios from \"axios\";\nimport \"./App.css\"; // Make sure to create and link this CSS file\n\nconst socket = io(\"https://coolie-booking-service.onrender.com\");\n\nconst App = () => {\n  const [bookings, setBookings] = useState([]);\n  const [form, setForm] = useState({\n    passengerName: \"\",\n    trainNumber: \"\",\n    coachNumber: \"\",\n    station: \"\",\n    minutesBeforeArrival: \"\",\n    cooliesNeeded: \"\",\n  });\n\n  useEffect(() => {\n    axios.get(\"https://coolie-booking-service.onrender.com/api/bookings\").then((res) => setBookings(res.data));\n\n    socket.on(\"updateBookings\", (newBooking) => {\n      setBookings((prev) => [...prev, newBooking]);\n    });\n\n    return () => socket.off(\"updateBookings\");\n  }, []);\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const res = await axios.post(\"https://coolie-booking-service.onrender.com/api/bookings\", form);\n    socket.emit(\"newBooking\", res.data);\n    setForm({ passengerName: \"\", trainNumber: \"\", coachNumber: \"\", station: \"\", minutesBeforeArrival: \"\", cooliesNeeded: \"\" });\n  };\n\n  const handleClearBookings = async () => {\n    const username = prompt(\"Enter Username:\");\n    const password = prompt(\"Enter Password:\");\n\n    if (username === \"admin\" && password === \"admin2025\") {\n      try {\n        await axios.delete(\"https://coolie-booking-service.onrender.com/api/bookings/clear\", {\n          auth: { username, password }\n        });\n        alert(\"All active bookings cleared!\");\n        setBookings([]);\n      } catch (error) {\n        alert(\"Failed to clear bookings. Please try again.\");\n      }\n    } else {\n      alert(\"Invalid credentials!\");\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"booking-form\">\n        <h1>üöÜ Coolie Booking Service</h1>\n        <form onSubmit={handleSubmit}>\n          <input type=\"text\" name=\"passengerName\" placeholder=\"Passenger Name\" value={form.passengerName} onChange={handleChange} required />\n          <input type=\"text\" name=\"trainNumber\" placeholder=\"Train Number\" value={form.trainNumber} onChange={handleChange} required />\n          <input type=\"text\" name=\"coachNumber\" placeholder=\"Coach Number\" value={form.coachNumber} onChange={handleChange} required />\n          <input type=\"text\" name=\"station\" placeholder=\"Station Name\" value={form.station} onChange={handleChange} required />\n          <input type=\"number\" name=\"minutesBeforeArrival\" placeholder=\"Minutes Before Arrival\" value={form.minutesBeforeArrival} onChange={handleChange} required />\n          <input type=\"number\" name=\"cooliesNeeded\" placeholder=\"Coolies Needed\" value={form.cooliesNeeded} onChange={handleChange} required />\n          <button type=\"submit\">Book Coolie üöÄ</button>\n        </form>\n      </div>\n\n      <div className=\"active-bookings\">\n        <h2>üìã Active Bookings:</h2>\n        <div>\n          {bookings.length === 0 ? (\n            <p>No active bookings</p>\n          ) : (\n            <table>\n              <thead>\n                <tr>\n                  <th>Name</th>\n                  <th>Train No.</th>\n                  <th>Coach No.</th>\n                </tr>\n              </thead>\n              <tbody>\n                {bookings.map((b, index) => (\n                  <tr key={index}>\n                    <td>{b.passengerName}</td>\n                    <td>{b.trainNumber}</td>\n                    <td>{b.coachNumber}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      </div>\n\n      {/* Clear Bookings Button */}\n      <button onClick={handleClearBookings} className=\"clear-button\">\n        Clear All Active Bookings ‚ùå\n      </button>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}